{"ast":null,"code":"/* Histogram.jsx */import React from'react';import{BarChart,Bar,XAxis,YAxis,CartesianGrid,Tooltip,ResponsiveContainer,Cell}from'recharts';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const colorPalette=['#c1dcc7','#4daf4a','#377eb8','#984ea3','#ff7f00','#ffff33','#a65628','#f781bf','#999999','#66c2a5'];function isDiscrete(values){return values.every(v=>Number.isInteger(v));}function Histogram(_ref){let{values,panelId,onHighlight,highlightedSite,highlightOrigin,linkedTo,height}=_ref;const data=values.map((value,index)=>({site:index,value}));const min=Math.min(...values),max=Math.max(...values);const unique=Array.from(new Set(values));const discrete=isDiscrete(values)&&unique.length<=colorPalette.length;const cmap=discrete?Object.fromEntries(unique.map((v,i)=>[v,colorPalette[i]])):null;const getColor=v=>{if(discrete)return cmap[v];const t=Math.sqrt((v-min)/(max-min||1));return\"rgb(255,\".concat(Math.round(255*(1-t)),\",\").concat(Math.round(255*(1-t)),\")\");};return/*#__PURE__*/_jsxs(_Fragment,{children:[discrete&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap items-center mb-2 space-x-4\",children:unique.map((v,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-block w-4 h-4 rounded\",style:{background:cmap[v],border:'1px solid #ccc'}}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs\",children:v})]},v))}),/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:height,children:/*#__PURE__*/_jsxs(BarChart,{data:data,margin:{bottom:30},children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"site\",label:{value:'Site',position:'insideBottom',offset:10},height:50,interval:Math.max(0,Math.floor(Math.sqrt(values.length))-1)}),/*#__PURE__*/_jsx(YAxis,{label:{value:'Value',angle:-90,position:'insideLeft'}}),/*#__PURE__*/_jsx(Tooltip,{}),/*#__PURE__*/_jsx(Bar,{dataKey:\"value\",children:data.map((entry,index)=>{const isLinkedHighlight=highlightedSite===index&&linkedTo===highlightOrigin;return/*#__PURE__*/_jsx(Cell,{fill:getColor(entry.value),onMouseEnter:()=>onHighlight(index,panelId),onMouseLeave:()=>onHighlight(null,panelId),className:isLinkedHighlight?'histogram-highlight':''},\"cell-\".concat(index));})})]})})]});}export default Histogram;","map":{"version":3,"names":["React","BarChart","Bar","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","Cell","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","colorPalette","isDiscrete","values","every","v","Number","isInteger","Histogram","_ref","panelId","onHighlight","highlightedSite","highlightOrigin","linkedTo","height","data","map","value","index","site","min","Math","max","unique","Array","from","Set","discrete","length","cmap","Object","fromEntries","i","getColor","t","sqrt","concat","round","children","className","style","background","border","width","margin","bottom","strokeDasharray","dataKey","label","position","offset","interval","floor","angle","entry","isLinkedHighlight","fill","onMouseEnter","onMouseLeave"],"sources":["/Users/lucanest/Desktop/f.nosync/msaviz/frontend/src/components/Histogram.jsx"],"sourcesContent":["\n/* Histogram.jsx */\nimport React from 'react';\nimport {\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Cell\n} from 'recharts';\n\nconst colorPalette = [\n  '#c1dcc7', '#4daf4a', '#377eb8', '#984ea3', '#ff7f00',\n  '#ffff33', '#a65628', '#f781bf', '#999999', '#66c2a5'\n];\nfunction isDiscrete(values) {\n  return values.every(v => Number.isInteger(v));\n}\n\n\nfunction Histogram({ values, panelId, onHighlight, highlightedSite, highlightOrigin, linkedTo, height}) {\n  const data = values.map((value, index) => ({ site: index, value }));\n  const min = Math.min(...values), max = Math.max(...values);\n  const unique = Array.from(new Set(values));\n  const discrete = isDiscrete(values) && unique.length <= colorPalette.length;\n  const cmap = discrete ? Object.fromEntries(unique.map((v,i)=>[v, colorPalette[i]])) : null;\n\n  const getColor = v => {\n    if (discrete) return cmap[v];\n    const t = Math.sqrt((v-min)/(max-min||1)); return `rgb(255,${Math.round(255*(1-t))},${Math.round(255*(1-t))})`;\n  };\n\n  return (\n    <>\n      {discrete && (\n        <div className=\"flex flex-wrap items-center mb-2 space-x-4\">\n          {unique.map((v, i) => (\n            <div key={v} className=\"flex items-center space-x-1\">\n              <span\n                className=\"inline-block w-4 h-4 rounded\"\n                style={{ background: cmap[v], border: '1px solid #ccc' }}\n              />\n              <span className=\"text-xs\">{v}</span>\n            </div>\n          ))}\n        </div>\n      )}\n      <ResponsiveContainer width=\"100%\" height={height}>\n        <BarChart data={data} margin={{ bottom: 30 }}>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"site\" label={{ value: 'Site', position: 'insideBottom', offset: 10 }} height={50} interval={Math.max(0, Math.floor(Math.sqrt(values.length)) - 1)}/>\n          <YAxis label={{ value: 'Value', angle: -90, position: 'insideLeft' }} />\n          <Tooltip />\n          <Bar dataKey=\"value\">\n            {data.map((entry, index) => {\n              const isLinkedHighlight = highlightedSite === index && linkedTo === highlightOrigin;\n              return (\n                <Cell\n                  key={`cell-${index}`}\n                  fill={getColor(entry.value)}\n                  onMouseEnter={() => onHighlight(index, panelId)}\n                  onMouseLeave={() => onHighlight(null, panelId)}\n                  className={isLinkedHighlight ? 'histogram-highlight' : ''}\n                />\n              );\n            })}\n          </Bar>\n        </BarChart>\n      </ResponsiveContainer>\n    </>\n  );\n}\n\nexport default Histogram;\n"],"mappings":"AACA,mBACA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OACEC,QAAQ,CAAEC,GAAG,CAAEC,KAAK,CAAEC,KAAK,CAAEC,aAAa,CAAEC,OAAO,CAAEC,mBAAmB,CAAEC,IAAI,KACzE,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAElB,KAAM,CAAAC,YAAY,CAAG,CACnB,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CACrD,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CAAE,SAAS,CACtD,CACD,QAAS,CAAAC,UAAUA,CAACC,MAAM,CAAE,CAC1B,MAAO,CAAAA,MAAM,CAACC,KAAK,CAACC,CAAC,EAAIC,MAAM,CAACC,SAAS,CAACF,CAAC,CAAC,CAAC,CAC/C,CAGA,QAAS,CAAAG,SAASA,CAAAC,IAAA,CAAsF,IAArF,CAAEN,MAAM,CAAEO,OAAO,CAAEC,WAAW,CAAEC,eAAe,CAAEC,eAAe,CAAEC,QAAQ,CAAEC,MAAM,CAAC,CAAAN,IAAA,CACpG,KAAM,CAAAO,IAAI,CAAGb,MAAM,CAACc,GAAG,CAAC,CAACC,KAAK,CAAEC,KAAK,IAAM,CAAEC,IAAI,CAAED,KAAK,CAAED,KAAM,CAAC,CAAC,CAAC,CACnE,KAAM,CAAAG,GAAG,CAAGC,IAAI,CAACD,GAAG,CAAC,GAAGlB,MAAM,CAAC,CAAEoB,GAAG,CAAGD,IAAI,CAACC,GAAG,CAAC,GAAGpB,MAAM,CAAC,CAC1D,KAAM,CAAAqB,MAAM,CAAGC,KAAK,CAACC,IAAI,CAAC,GAAI,CAAAC,GAAG,CAACxB,MAAM,CAAC,CAAC,CAC1C,KAAM,CAAAyB,QAAQ,CAAG1B,UAAU,CAACC,MAAM,CAAC,EAAIqB,MAAM,CAACK,MAAM,EAAI5B,YAAY,CAAC4B,MAAM,CAC3E,KAAM,CAAAC,IAAI,CAAGF,QAAQ,CAAGG,MAAM,CAACC,WAAW,CAACR,MAAM,CAACP,GAAG,CAAC,CAACZ,CAAC,CAAC4B,CAAC,GAAG,CAAC5B,CAAC,CAAEJ,YAAY,CAACgC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAG,IAAI,CAE1F,KAAM,CAAAC,QAAQ,CAAG7B,CAAC,EAAI,CACpB,GAAIuB,QAAQ,CAAE,MAAO,CAAAE,IAAI,CAACzB,CAAC,CAAC,CAC5B,KAAM,CAAA8B,CAAC,CAAGb,IAAI,CAACc,IAAI,CAAC,CAAC/B,CAAC,CAACgB,GAAG,GAAGE,GAAG,CAACF,GAAG,EAAE,CAAC,CAAC,CAAC,CAAE,iBAAAgB,MAAA,CAAkBf,IAAI,CAACgB,KAAK,CAAC,GAAG,EAAE,CAAC,CAACH,CAAC,CAAC,CAAC,MAAAE,MAAA,CAAIf,IAAI,CAACgB,KAAK,CAAC,GAAG,EAAE,CAAC,CAACH,CAAC,CAAC,CAAC,MAC7G,CAAC,CAED,mBACErC,KAAA,CAAAE,SAAA,EAAAuC,QAAA,EACGX,QAAQ,eACPhC,IAAA,QAAK4C,SAAS,CAAC,4CAA4C,CAAAD,QAAA,CACxDf,MAAM,CAACP,GAAG,CAAC,CAACZ,CAAC,CAAE4B,CAAC,gBACfnC,KAAA,QAAa0C,SAAS,CAAC,6BAA6B,CAAAD,QAAA,eAClD3C,IAAA,SACE4C,SAAS,CAAC,8BAA8B,CACxCC,KAAK,CAAE,CAAEC,UAAU,CAAEZ,IAAI,CAACzB,CAAC,CAAC,CAAEsC,MAAM,CAAE,gBAAiB,CAAE,CAC1D,CAAC,cACF/C,IAAA,SAAM4C,SAAS,CAAC,SAAS,CAAAD,QAAA,CAAElC,CAAC,CAAO,CAAC,GAL5BA,CAML,CACN,CAAC,CACC,CACN,cACDT,IAAA,CAACH,mBAAmB,EAACmD,KAAK,CAAC,MAAM,CAAC7B,MAAM,CAAEA,MAAO,CAAAwB,QAAA,cAC/CzC,KAAA,CAACX,QAAQ,EAAC6B,IAAI,CAAEA,IAAK,CAAC6B,MAAM,CAAE,CAAEC,MAAM,CAAE,EAAG,CAAE,CAAAP,QAAA,eAC3C3C,IAAA,CAACL,aAAa,EAACwD,eAAe,CAAC,KAAK,CAAE,CAAC,cACvCnD,IAAA,CAACP,KAAK,EAAC2D,OAAO,CAAC,MAAM,CAACC,KAAK,CAAE,CAAE/B,KAAK,CAAE,MAAM,CAAEgC,QAAQ,CAAE,cAAc,CAAEC,MAAM,CAAE,EAAG,CAAE,CAACpC,MAAM,CAAE,EAAG,CAACqC,QAAQ,CAAE9B,IAAI,CAACC,GAAG,CAAC,CAAC,CAAED,IAAI,CAAC+B,KAAK,CAAC/B,IAAI,CAACc,IAAI,CAACjC,MAAM,CAAC0B,MAAM,CAAC,CAAC,CAAG,CAAC,CAAE,CAAC,CAAC,cACpKjC,IAAA,CAACN,KAAK,EAAC2D,KAAK,CAAE,CAAE/B,KAAK,CAAE,OAAO,CAAEoC,KAAK,CAAE,CAAC,EAAE,CAAEJ,QAAQ,CAAE,YAAa,CAAE,CAAE,CAAC,cACxEtD,IAAA,CAACJ,OAAO,GAAE,CAAC,cACXI,IAAA,CAACR,GAAG,EAAC4D,OAAO,CAAC,OAAO,CAAAT,QAAA,CACjBvB,IAAI,CAACC,GAAG,CAAC,CAACsC,KAAK,CAAEpC,KAAK,GAAK,CAC1B,KAAM,CAAAqC,iBAAiB,CAAG5C,eAAe,GAAKO,KAAK,EAAIL,QAAQ,GAAKD,eAAe,CACnF,mBACEjB,IAAA,CAACF,IAAI,EAEH+D,IAAI,CAAEvB,QAAQ,CAACqB,KAAK,CAACrC,KAAK,CAAE,CAC5BwC,YAAY,CAAEA,CAAA,GAAM/C,WAAW,CAACQ,KAAK,CAAET,OAAO,CAAE,CAChDiD,YAAY,CAAEA,CAAA,GAAMhD,WAAW,CAAC,IAAI,CAAED,OAAO,CAAE,CAC/C8B,SAAS,CAAEgB,iBAAiB,CAAG,qBAAqB,CAAG,EAAG,UAAAnB,MAAA,CAJ7ClB,KAAK,CAKnB,CAAC,CAEN,CAAC,CAAC,CACC,CAAC,EACE,CAAC,CACQ,CAAC,EACtB,CAAC,CAEP,CAEA,cAAe,CAAAX,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}